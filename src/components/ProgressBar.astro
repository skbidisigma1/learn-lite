---
interface Props {
  value: number;
  max?: number;
  label?: string;
  showPercent?: boolean;
  variant?: 'default' | 'success' | 'warning' | 'danger';
  size?: 'sm' | 'md' | 'lg';
}

const { 
  value, 
  max = 100, 
  label, 
  showPercent = true,
  variant = 'default',
  size = 'md'
} = Astro.props;

const percent = Math.min(100, Math.max(0, (value / max) * 100));

const variants = {
  default: "bg-blue-600",
  success: "bg-green-500",
  warning: "bg-yellow-500",
  danger: "bg-red-500"
};

const sizes = {
  sm: "h-1.5",
  md: "h-2.5",
  lg: "h-4"
};
---

<div class="w-full">
  {(label || showPercent) && (
    <div class="flex justify-between mb-1">
      {label && <span class="text-sm font-medium text-gray-700 dark:text-gray-300">{label}</span>}
      {showPercent && <span class="text-sm font-medium text-gray-500 dark:text-gray-400">{Math.round(percent)}%</span>}
    </div>
  )}
  <div class={`w-full bg-gray-200 dark:bg-gray-700 rounded-full ${sizes[size]}`}>
    <div 
      class={`${variants[variant]} ${sizes[size]} rounded-full transition-all duration-300`} 
      style={`width: ${percent}%`}
    />
  </div>
</div>
